async function loadAnglerList() {
  console.log('loadAnglerList started');
  const anglerList = document.getElementById('angler-list');
  if (!anglerList) {
    console.error('DOM element not found: angler-list');
    return;
  }
  try {
    const response = await fetch(
      'https://raw.githubusercontent.com/hackerfrankone/FamilyFishing/main/CSV/angler_list.csv?cachebust=' + new Date().getTime()
    );
    if (!response.ok) {
      throw new Error(`HTTP error! status: ${response.status}`);
    }
    const text = await response.text();
    const lines = text.split('\n').filter((line) => line.trim() !== '');
    if (lines.length === 0) {
      console.warn('No anglers found in CSV');
      anglerList.innerHTML = '<li>No anglers found.</li>';
      return;
    }
    const anglerNames = lines
      .map((line) => {
        const name = line.split(',')[0]?.trim();
        return name ? `<li>${name}</li>` : null;
      })
      .filter((item) => item !== null)
      .join('');
    anglerList.innerHTML = anglerNames || '<li>No anglers found.</li>';
    console.log('Angler list loaded successfully');
  } catch (error) {
    console.error('Error loading angler list:', error);
    anglerList.innerHTML = '<li>Error loading anglers</li>';
  }
}

// Load initially and refresh every 5 minutes
document.addEventListener('DOMContentLoaded', function () {
  loadAnglerList();
  setInterval(loadAnglerList, 5 * 60 * 1000); // 5 minutes
});
