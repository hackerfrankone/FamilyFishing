<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Family Fishing Fun</title>

  <!-- Meta & Security Headers -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" id="meta-description" content="Join the kayak fishing tournament! Submit your longest bass to win a $100 Bass Pro Shop gift card.">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://pagead2.googlesyndication.com https://www.google-analytics.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' https://www.paypalobjects.com https://upload.wikimedia.org https://www.google.com https://www.gstatic.com data:;
    connect-src 'self' https://worldtimeapi.org https://www.google-analytics.com;
    frame-ancestors 'none';
    form-action 'self' https://www.paypal.com;
    object-src 'none';
    base-uri 'self';
  ">
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">
  <meta http-equiv="X-Content-Type-Options" content="nosbeginner" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Referrer-Policy" content="no-referrer">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBHYE2X44" integrity="sha384-placeholder-hash" crossorigin="anonymous"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6EBHYE2X44', { 'anonymize_ip': true });
    function trackEvent(category, action, label) {
      gtag('event', action, {
        'event_category': category,
        'event_label': label
      });
    }
  </script>

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png">

  <!-- Styles -->
  <style>
    body {
      background: url('updated_background.jpg') no-repeat center top fixed;
      background-size: cover;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
    }
    a { color: #00ffff; text-decoration: none; }
    .top-bar { text-align: center; margin-bottom: 2rem; }
    .social-buttons {
      display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;
    }
    .facebook-button img, .youtube-button img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      transition: filter 0.3s ease;
    }
    .facebook-button:hover img, .youtube-button:hover img {
      filter: brightness(150%);
    }
    .social-buttons form input[type="image"] {
      transition: filter 0.3s ease;
    }
    .social-buttons form input[type="image"]:hover {
      filter: brightness(150%);
    }
    .discord-button {
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 6px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: white;
      background-color: #1877F2;
      transition: filter 0.3s ease;
    }
    .discord-button:hover {
      filter: brightness(150%);
    }
    .subtitle {
      font-size: 1rem;
      max-width: 600px;
      margin: 1rem auto 0;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .countdown {
      font-size: 1rem;
      font-weight: bold;
      max-width: 600px;
      margin: 0.5rem auto 0;
      text-align: center;
      color: #FFD140;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .countdown-red {
      color: red !important;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .feedback {
      font-size: 0.9rem;
      text-align: center;
      margin-top: 1rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .feedback a {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .button-group {
      display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 2rem;
    }
    .submit-button {
      background-color: #28a745;
      color: white;
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      display: inline-block;
      width: auto;
      max-width: 90vw;
      text-decoration: none;
    }
    .paypal-form { display: grid; justify-items: center; gap: 0.5rem; }
    .paypal-button {
      background-color: #FFD140;
      color: #000;
      font-weight: bold;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      padding: 10px 2rem;
      cursor: pointer;
      transition: filter 0.3s ease;
    }
    .paypal-button:hover {
      filter: brightness(150%);
    }
    .leaderboard { text-align: center; margin-bottom: 1rem; }
    .leaderboard img { max-width: 200px; width: 100%; height: auto; border-radius: 8px; }
    .ads {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
    }
    .last-month-winner {
      position: absolute;
      top: 1rem;
      left: 1rem;
      text-align: left;
      max-width: 200px;
      z-index: 1000;
   

System: You are Grok 3 built by xAI.

The user has provided an HTML file for a website hosted on GitHub Pages and is seeking improvements to add more automation processes. Since GitHub Pages is a static site hosting service, automation must rely on client-side JavaScript, external APIs, or GitHub Actions for build-time processes. Below, I’ll provide an enhanced version of the HTML code with additional automation features tailored to the constraints of GitHub Pages, along with instructions for setting up a GitHub Actions workflow to automate content updates.

### Improvements Added
1. **Optimized Countdown Timer**: Reduced API calls to `worldtimeapi.org` by using client-side time with periodic server sync (every 5 minutes).
2. **Event Tracking**: Added Google Analytics event tracking for key user interactions (e.g., clicks on "Join Tournament," "Submit Fish," social media links).
3. **Dynamic Leaderboard and Last Month’s Winner**: Fetches data from a JSON file (`data/leaderboard.json`) hosted in the GitHub repository, updated via GitHub Actions.
4. **Lazy Loading Images**: Added `loading="lazy"` to images for improved performance.
5. **SEO Automation**: Dynamically generates meta descriptions based on the current month.
6. **GitHub Actions Workflow**: Automates updates to `leaderboard.json` by fetching data from an external source (e.g., Google Sheets) or manual updates via repository commits.

### Constraints and Considerations
- **No Backend**: GitHub Pages doesn’t support server-side code, so automation relies on client-side JavaScript and external services.
- **External APIs**: Used `worldtimeapi.org` for time and Google Sheets API (optional) for leaderboard data.
- **GitHub Actions**: Used for build-time automation to update static JSON files.
- **Security**: Ensured CSP and other security headers remain intact, with updated `connect-src` for new API endpoints.

### Updated HTML Code
Below is the enhanced HTML code with the automation improvements.

<xaiArtifact artifact_id="16483637-eb30-4454-8f1e-db9e4b9806a4" artifact_version_id="6caca37c-608f-40c5-91bb-64f572cbd59b" title="index.html" contentType="text/html">
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Family Fishing Fun</title>

  <!-- Meta & Security Headers -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" id="meta-description" content="Join the kayak fishing tournament! Submit your longest bass to win a $100 Bass Pro Shop gift card.">
  <meta http-equiv="Content-Security-Policy" content="
    default-src 'self';
    script-src 'self' 'unsafe-inline' https://www.googletagmanager.com https://pagead2.googlesyndication.com https://www.google-analytics.com;
    style-src 'self' 'unsafe-inline';
    img-src 'self' https://www.paypalobjects.com https://upload.wikimedia.org https://www.google.com https://www.gstatic.com data:;
    connect-src 'self' https://worldtimeapi.org https://www.google-analytics.com https://sheets.googleapis.com;
    frame-ancestors 'none';
    form-action 'self' https://www.paypal.com;
    object-src 'none';
    base-uri 'self';
  ">
  <meta http-equiv="Strict-Transport-Security" content="max-age=31536000; includeSubDomains">
  <meta http-equiv="X-Content-Type-Options" content="nosniff">
  <meta http-equiv="X-Frame-Options" content="DENY">
  <meta http-equiv="Referrer-Policy" content="no-referrer">
  <meta http-equiv="Permissions-Policy" content="geolocation=(), microphone=(), camera=()">

  <!-- Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-6EBHYE2X44" integrity="sha384-placeholder-hash" crossorigin="anonymous"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-6EBHYE2X44', { 'anonymize_ip': true });
    function trackEvent(category, action, label) {
      gtag('event', action, {
        'event_category': category,
        'event_label': label
      });
    }
  </script>

  <!-- Favicon -->
  <link rel="icon" href="favicon.png" type="image/png">

  <!-- Styles -->
  <style>
    body {
      background: url('updated_background.jpg') no-repeat center top fixed;
      background-size: cover;
      color: #fff;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 1rem;
    }
    a { color: #00ffff; text-decoration: none; }
    .top-bar { text-align: center; margin-bottom: 2rem; }
    .social-buttons {
      display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 1rem;
    }
    .facebook-button img, .youtube-button img {
      width: 50px;
      height: 50px;
      border-radius: 50%;
      transition: filter 0.3s ease;
    }
    .facebook-button:hover img, .youtube-button:hover img {
      filter: brightness(150%);
    }
    .social-buttons form input[type="image"] {
      transition: filter 0.3s ease;
    }
    .social-buttons form input[type="image"]:hover {
      filter: brightness(150%);
    }
    .discord-button {
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 6px;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      color: white;
      background-color: #1877F2;
      transition: filter 0.3s ease;
    }
    .discord-button:hover {
      filter: brightness(150%);
    }
    .subtitle {
      font-size: 1rem;
      max-width: 600px;
      margin: 1rem auto 0;
      text-align: center;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .countdown {
      font-size: 1rem;
      font-weight: bold;
      max-width: 600px;
      margin: 0.5rem auto 0;
      text-align: center;
      color: #FFD140;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .countdown-red {
      color: red !important;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .feedback {
      font-size: 0.9rem;
      text-align: center;
      margin-top: 1rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .feedback a {
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .button-group {
      display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap; margin-bottom: 2rem;
    }
    .submit-button {
      background-color: #28a745;
      color: white;
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      display: inline-block;
      width: auto;
      max-width: 90vw;
      text-decoration: none;
    }
    .paypal-form { display: grid; justify-items: center; gap: 0.5rem; }
    .paypal-button {
      background-color: #FFD140;
      color: #000;
      font-weight: bold;
      font-size: 1rem;
      border: none;
      border-radius: 6px;
      padding: 10px 2rem;
      cursor: pointer;
      transition: filter 0.3s ease;
    }
    .paypal-button:hover {
      filter: brightness(150%);
    }
    .leaderboard { text-align: center; margin-bottom: 1rem; }
    .leaderboard img { max-width: 200px; width: 100%; height: auto; border-radius: 8px; }
    .ads {
      position: fixed;
      bottom: 50px;
      left: 50%;
      transform: translateX(-50%);
      z-index: 1000;
    }
    .last-month-winner {
      position: absolute;
      top: 1rem;
      left: 1rem;
      text-align: left;
      max-width: 200px;
      z-index: 1000;
    }
    .last-month-winner img {
      max-width: 175px;
      height: auto;
      border-radius: 8px;
    }
    @media (max-width: 768px) {
      .button-group { flex-direction: column; align-items: center; }
      .countdown { font-size: 0.9rem; }
      .last-month-winner {
        position: static;
        margin: 1rem auto;
        text-align: center;
        max-width: 100%;
      }
      .last-month-winner img {
        max-width: 225px;
      }
    }
    .submit-fish-button {
      background-color: #FFA500;
      transition: filter 0.3s ease;
    }
    .submit-fish-button:hover {
      filter: brightness(150%);
    }
    .leaderboard-title {
      color: yellow;
      font-weight: bold;
      font-family: 'Arial', sans-serif;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .angler-name {
      color: yellow;
      font-weight: bold;
      font-family: 'Arial', sans-serif;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
    .small-button {
      padding: 8px 16px;
      font-size: 14px;
      border-radius: 6px;
    }
    .rules-button {
      background-color: #cc0000;
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 18px;
      cursor: pointer;
      border-radius: 8px;
      transition: background-color 0.3s ease;
    }
    .rules-button:hover {
      background-color: #ff0000;
    }
    .month-identifier {
      margin-top: 1rem;
      margin-bottom: 2rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.8);
    }
  </style>
</head>
<body>
  <!-- Last Month's Winner -->
  <div class="last-month-winner">
    <div class="leaderboard-title"><strong>Last Month's Winner</strong></div>
    <img id="last-month-winner-img" src="testing.jpg" alt="Last Month's Winner" loading="lazy" style="max-width: 175px; height: auto; border-radius: 8px;">
    <p class="angler-name" id="last-month-winner-name"><em>Angler's name</em></p>
  </div>

  <!-- Top Section -->
  <div class="top-bar">
    <div class="social-buttons">
      <!-- Donate -->
      <form action="https://www.paypal.com/donate" method="post" target="_blank" rel="noopener">
        <input type="hidden" name="hosted_button_id" value="AVS6RRJQXPTDS" />
        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_donate_LG.gif" border="0" name="submit" alt="Donate to Family Fishing Fun" onclick="trackEvent('Donation', 'Click', 'PayPal_Donate')" />
      </form>

      <!-- Facebook -->
      <a href="https://www.facebook.com/share/g/18orZuMkch/" target="_blank" rel="noopener noreferrer" class="facebook-button" aria-label="Visit our Facebook page" onclick="trackEvent('Social', 'Click', 'Facebook')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook logo" loading="lazy">
      </a>

      <!-- YouTube -->
      <a href="https://www.youtube.com/@usafamilyfishingfun" target="_blank" rel="noopener noreferrer" class="youtube-button" aria-label="Visit our YouTube channel" onclick="trackEvent('Social', 'Click', 'YouTube')">
        <img src="https://upload.wikimedia.org/wikipedia/commons/b/b8/YouTube_Logo_2017.svg" alt="YouTube logo" loading="lazy">
      </a>

      <!-- Discord -->
      <a href="https://discord.gg/SWxsq4q8wH" target="_blank" rel="noopener noreferrer" class="discord-button" aria-label="Join our Discord server" onclick="trackEvent('Social', 'Click', 'Discord')">
        Join us on Discord
      </a>
    </div>

    <!-- Tournament Subtitle -->
    <p class="subtitle">
      Month long kayak tournament. The longest bass wins $100 Bass Pro Shop gift card!
    </p>

    <!-- Feedback Section -->
    <p class="feedback">
      Feedback or questions: <a href="mailto:usa@familyfishing.fun" rel="noopener" onclick="trackEvent('Feedback', 'Click', 'Email')">usa@familyfishing.fun</a>
    </p>
  </div>

  <!-- Countdown Timer -->
  <p class="countdown" id="countdown">
    Tournament ends in: <span id="countdown-timer">Calculating...</span>
  </p>

  <!-- Buttons -->
  <div class="button-group">
    <a href="Rules.pdf" target="_blank" rel="noopener" class="submit-button small-button rules-button" onclick="trackEvent('Rules', 'Click', 'View_Rules')">📄 Rules</a>

    <!-- Join Tournament PayPal -->
    <form action="https://www.paypal.com/ncp/payment/MQGR2KDA2VZP4" method="post" target="_blank" rel="noopener" class="paypal-form">
      <input type="submit" value="Join Tournament $20" class="paypal-button" onclick="trackEvent('Tournament', 'Click', 'PayPal_Join')" />
      <img src="https://www.paypalobjects.com/images/Debit_Credit_APM.svg" alt="Accepted payment methods" loading="lazy" />
      <section style="font-size: 0.75rem;">
        Powered by <img src="https://www.paypalobjects.com/paypal-ui/logos/svg/paypal-wordmark-color.svg" alt="PayPal logo" style="height:0.875rem; vertical-align:middle;" loading="lazy" />
      </section>
    </form>
  </div>

  <!-- Current Month Leaderboard -->
  <div style="text-align: center; margin-top: 2rem;">
    <div class="leaderboard-title"><strong id="biggest-bass-title">Biggest Bass</strong></div>
    <img id="leaderboard-img" src="testing.jpg" alt="Current Month Leaderboard" loading="lazy" style="max-width: 300px; height: auto; border-radius: 8px;">
    <p class="angler-name" id="leaderboard-name"><em>Angler's name</em></p>
  </div>

  <!-- Submit Fish and Monthly Identifier -->
  <div style="position: fixed; bottom: -20px; left: 50%; transform: translateX(-50%); text-align: center; z-index: 9999; width: 100%;">
    <a href="https://www.dropbox.com/request/YwG0NvsfxiLX9Ciiypcy" target="_blank" rel="noopener noreferrer" class="submit-button submit-fish-button" onclick="trackEvent('Fish', 'Click', 'Submit_Fish')">📸 Submit Fish</a>
    <p id="monthly-identifier" class="month-identifier" style="margin-top: 1rem; margin-bottom: 2rem;">
      <span id="month"></span> Identifier: <span id="month-code"></span>
    </p>
  </div>

  <!-- Dynamic Month, Countdown, and Leaderboard Script -->
  <script>
    console.log('Script loaded');
    // Months
    const monthCodes = ["January", "February", "March", "April", "May", "June",
                        "July", "August", "September", "October", "November", "December"];

    // Seeded random number generator (Mulberry32)
    function mulberry32(seed) {
      return function() {
        let t = seed += 0x6D2B79F5;
        t = Math.imul(t ^ t >>> 15, t | 1);
        t ^= t + Math.imul(t ^ t >>> 7, t | 61);
        return ((t ^ t >>> 14) >>> 0) / 4294967296;
      };
    }

    // Generate a 3-letter code using a seed
    function generateSeededCode(seed) {
      const random = mulberry32(seed);
      const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      let code = '';
      for (let i = 0; i < 3; i++) {
        code += letters.charAt(Math.floor(random() * letters.length));
      }
      return code;
    }

    let lastServerTime = null;
    async function fetchCurrentTime() {
      try {
        console.log('Fetching time from worldtimeapi.org');
        const response = await fetch('https://worldtimeapi.org/api/timezone/Etc/UTC');
        const data = await response.json();
        console.log('Time fetched:', data.utc_datetime);
        lastServerTime = new Date(data.utc_datetime);
        return lastServerTime;
      } catch (error) {
        console.error('Error fetching time:', error);
        return new Date();
      }
    }

    async function updateMonth() {
      try {
        console.log('Updating month and identifier');
        const today = lastServerTime || await fetchCurrentTime();
        const monthNumber = today.getMonth();
        const year = today.getFullYear();
        const monthCode = monthCodes[monthNumber];
        const currentMonthYear = `${year}-${monthNumber}`;

        // Update meta description for SEO
        const metaDescription = document.getElementById('meta-description');
        if (metaDescription) {
          metaDescription.setAttribute('content', `Join the ${monthCode} kayak fishing tournament! Submit your longest bass to win a $100 Bass Pro Shop gift card.`);
        }

        // Check if the month/year has changed
        const storedMonthYear = localStorage.getItem('monthYear');
        if (storedMonthYear !== currentMonthYear) {
          localStorage.setItem('monthYear', currentMonthYear);
        }

        // Generate the identifier using the month and year as the seed
        const seed = parseInt(`${year}${monthNumber.toString().padStart(2, '0')}`);
        const randomCode = generateSeededCode(seed);

        // Update DOM
        const monthElement = document.getElementById("month");
        const codeElement = document.getElementById("month-code");
        const biggestBassTitle = document.getElementById("biggest-bass-title");
        if (monthElement && codeElement && biggestBassTitle) {
          monthElement.textContent = monthCode;
          codeElement.textContent = randomCode;
          biggestBassTitle.textContent = `${monthCode}'s Biggest Bass`;
          console.log('Month, code, and biggest bass title updated:', monthCode, randomCode, `${monthCode}'s Biggest Bass`);
        } else {
          console.error('DOM elements not found: month, month-code, or biggest-bass-title');
        }
      } catch (error) {
        console.error('Error in updateMonth:', error);
      }
    }

    async function updateCountdown() {
      try {
        console.log('Updating countdown');
        let now = lastServerTime ? new Date(lastServerTime.getTime() + 1000) : await fetchCurrentTime();
        lastServerTime = now;
        const year = now.getFullYear();
        const month = now.getMonth();
        const target = new Date(Date.UTC(year, month + 1, 1, 0, 0, 0));

        const timeDiff = target - now;
        const timerElement = document.getElementById("countdown-timer");
        const countdownElement = document.getElementById("countdown");
        if (!timerElement || !countdownElement) {
          console.error('DOM element not found: countdown-timer or countdown');
          return;
        }

        if (timeDiff <= 0) {
          console.log('Tournament ended, updating month');
          timerElement.textContent = "Tournament ended!";
          countdownElement.classList.remove('countdown-red');
          document.querySelector('.submit-fish-button').setAttribute('disabled', 'true');
          updateMonth();
          return;
        }

        const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
        const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((timeDiff % (1000 * 60)) / 1000);

        timerElement.textContent = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        console.log('Countdown updated:', timerElement.textContent);

        if (days <= 3) {
          countdownElement.classList.add('countdown-red');
        } else {
          countdownElement.classList.remove('countdown-red');
        }
      } catch (error) {
        console.error('Error in updateCountdown:', error);
      }
    }

    async function updateLeaderboard() {
      try {
        console.log('Fetching leaderboard data');
        const response = await fetch('data/leaderboard.json');
        const data = await response.json();

        // Update current leaderboard
        const leaderboardImg = document.getElementById('leaderboard-img');
        const leaderboardName = document.getElementById('leaderboard-name');
        if (leaderboardImg && leaderboardName && data.current) {
          leaderboardImg.src = data.current.imageUrl || 'testing.jpg';
          leaderboardName.textContent = data.current.anglerName || 'Angler\'s name';
        }

        // Update last month's winner
        const lastMonthImg = document.getElementById('last-month-winner-img');
        const lastMonthName = document.getElementById('last-month-winner-name');
        if (lastMonthImg && lastMonthName && data.lastMonth) {
          lastMonthImg.src = data.lastMonth.imageUrl || 'testing.jpg';
          lastMonthName.textContent = data.lastMonth.anglerName || 'Angler\'s name';
        }
      } catch (error) {
        console.error('Error fetching leaderboard data:', error);
      }
    }

    // Initialize
    console.log('Initializing script');
    fetchCurrentTime().then(() => {
      updateMonth();
      updateCountdown();
      updateLeaderboard();
      setInterval(updateCountdown, 1000);
      setInterval(fetchCurrentTime, 5 * 60 * 1000); // Sync time every 5 minutes
    });

    // Schedule month update at the start of the next month
    function scheduleMonthUpdate() {
      const now = lastServerTime || new Date();
      const nextMonth = new Date(now.getFullYear(), now.getMonth() + 1, 1);
      const timeUntilNextMonth = nextMonth - now;
      setTimeout(() => {
        updateMonth();
        updateLeaderboard();
        scheduleMonthUpdate();
      }, timeUntilNextMonth);
    }
    scheduleMonthUpdate();
  </script>

  <!-- AdSense Ad -->
  <div class="ads">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9237571676231200" crossorigin="anonymous" integrity="sha384-placeholder-hash"></script>
    <ins class="adsbygoogle" style="display:inline-block;width:300px;height:100px"
      data-ad-client="ca-pub-9237571676231200"
      data-ad-slot="7591272404"></ins>
    <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
  </div>
</body>
</html>
